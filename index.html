<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>🔥 لعبة الأندية - حلل الترند!</title>
  <style>
    body { background: #111; color: #fff; font-family: 'Cairo', Arial, sans-serif; text-align: center; }
    h1 { color: gold; font-size: 2.2em; margin-bottom: 0.2em; }
    .clubs { display: flex; flex-wrap: wrap; justify-content: center; margin: 18px 0 8px 0; }
    .club-btn {
      width: 90px; height: 110px; margin: 10px;
      border-radius: 20px; border: 2px solid #222; background: #232323;
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      cursor: pointer; transition: 0.2s; box-shadow: 0 1px 10px #0005;
    }
    .club-btn.selected { border: 2.5px solid #ffd700; box-shadow: 0 0 12px #ffd70090; }
    .club-btn img { width: 56px; height: 56px; margin-bottom: 5px; }
    .club-btn span { margin-top: 3px; font-size: 1.03em; color: #fffc; }
    .strip, .notifications, .trend { margin: 12px 0; }
    .strip { font-size: 1.25em; }
    .notifications { color: orange; font-size: 1.1em; }
    .trend { color: #00e2ff; font-weight: bold; font-size: 1.08em; }
    .actions { margin: 16px 0; }
    .btn { background: #0072ff; color: #fff; border: none; border-radius: 12px; padding: 10px 23px; font-size: 1.08em; margin: 0 8px; cursor: pointer; }
    .btn:active { background: #0050b3; }
    .best-strip { margin: 13px 0 5px 0; color: #fff; font-size: 1.1em; }
    @media (max-width: 600px) {
      .club-btn { width: 85px; height: 95px; }
      .club-btn img { width: 44px; height: 44px; }
    }
  </style>
</head>
<body>
  <h1>🏆 لعبة الأندية ... وحلل الترند!</h1>
  <div class="clubs" id="clubs"></div>

  <div class="strip" id="stripInfo">عدد الأندية في الشريط: <span id="stripCount">0/10</span></div>
  <div class="strip">شريطك الحالي: <span id="stripList">(فارغ)</span></div>
  <div class="notifications" id="notify"></div>
  <div class="trend" id="trend"></div>
  <div class="actions">
    <button class="btn" onclick="calcBest()">✨ أفضل 4</button>
    <button class="btn" onclick="resetStrip()">مسح</button>
  </div>
  <div class="best-strip" id="bestStrip"></div>

<script>
// بيانات الأندية وصورهم (روابط مضمونة)
const clubs = [
  { name: 'الهلال', img: 'https://upload.wikimedia.org/wikipedia/ar/2/2e/Al-Hilal_FC_logo.png' },
  { name: 'الأهلي', img: 'https://upload.wikimedia.org/wikipedia/ar/1/12/AlAhlySC.png' },
  { name: 'الرجاء', img: 'https://upload.wikimedia.org/wikipedia/ar/6/6c/Raja_Club_Athletic_crest.png' },
  { name: 'النصر', img: 'https://upload.wikimedia.org/wikipedia/ar/6/60/Al-Nassr_FC_logo.png' },
  { name: 'الاتحاد', img: 'https://upload.wikimedia.org/wikipedia/ar/3/32/Al-Ittihad_logo.png' },
  { name: 'الوداد', img: 'https://upload.wikimedia.org/wikipedia/ar/d/d8/Wydad_AC_logo.png' },
  { name: 'النجم', img: 'https://upload.wikimedia.org/wikipedia/ar/3/32/Etoile_Sportive_du_Sahel_logo.png' },
  { name: 'السد', img: 'https://upload.wikimedia.org/wikipedia/ar/5/56/Al-Sadd_SC_logo.png' },
];

let strip = [];
const maxStrip = 10;

function renderClubs() {
  let html = '';
  clubs.forEach((club, i) => {
    html += `
      <div class="club-btn" id="club${i}" onclick="selectClub(${i})">
        <img src="${club.img}" alt="${club.name}" />
        <span>${club.name}</span>
      </div>`;
  });
  document.getElementById('clubs').innerHTML = html;
}

function selectClub(idx) {
  if (strip.length >= maxStrip) {
    // شريط ممتلئ، احذف أول عنصر وأضف الجديد (سلوك الشريط المتحرك)
    strip.shift();
  }
  strip.push(idx);
  renderStrip();
}

function renderStrip() {
  // ترتيب الشريط الأخير (مع التكرار)
  let stripClubs = strip.map(i => clubs[i].name);
  let stripIcons = strip.map(i => `<img src="${clubs[i].img}" alt="" style="width:30px;vertical-align:middle">`);
  document.getElementById('stripCount').textContent = strip.length + '/10';
  document.getElementById('stripList').innerHTML = strip.length === 0 ? '(فارغ)' : stripIcons.join(' ');
  // أظهر الـ selected
  for (let i = 0; i < clubs.length; i++) {
    let btn = document.getElementById('club' + i);
    if (btn) btn.classList.remove('selected');
  }
  if (strip.length > 0) {
    let last = strip[strip.length - 1];
    let btn = document.getElementById('club' + last);
    if (btn) btn.classList.add('selected');
  }
  updateNotify();
  document.getElementById('bestStrip').innerHTML = '';
}

function resetStrip() {
  strip = [];
  renderStrip();
  document.getElementById('trend').textContent = '';
  document.getElementById('bestStrip').textContent = '';
}

function calcBest() {
  if (strip.length === 0) {
    document.getElementById('bestStrip').textContent = 'اختَر أندية أولاً!';
    return;
  }
  // احسب التكرارات في الشريط
  let counts = {};
  for (let idx of strip) {
    counts[idx] = (counts[idx] || 0) + 1;
  }
  // أفضل 4 بالترتيب حسب الأكثر تكراراً
  let best = Object.entries(counts)
    .sort((a, b) => b[1] - a[1])
    .slice(0, 4)
    .map(([i, c]) => `${c}× <img src="${clubs[i].img}" alt="" style="width:27px;vertical-align:middle"> ${clubs[i].name}`)
    .join(' &nbsp; ');
  document.getElementById('bestStrip').innerHTML = 'ترند أفضل 4: ' + best;
}

function updateNotify() {
  // توازن بين الأندية العربية (شمال أفريقيا) والسعودية/قطر
  let african = [1,2,5]; // الأهلي، الرجاء، الوداد، النجم (6) - النجم (6) ممكن تعتبرها تونسية أو خارج المجموعة
  let saudi = [0,3,4,7]; // الهلال، النصر، الاتحاد، السد
  let africanCount = strip.filter(i => african.includes(i)).length;
  let saudiCount = strip.filter(i => saudi.includes(i)).length;
  let notify = '';
  if (africanCount > saudiCount + 2) notify = '⚠️ الأندية العربية أعلى من الخليجية!';
  else if (saudiCount > africanCount + 2) notify = '⚠️ أندية السعودية وقطر أعلى من العربية!';
  document.getElementById('notify').textContent = notify;
}

renderClubs();
renderStrip();
</script>
</body>
</html>
