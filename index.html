<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Football Club Max - نسخة مصطفى الذكية</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      background: #111;
      color: #fff;
      font-family: 'Tajawal', Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    h1 { font-size: 2.2em; margin-top: 18px;}
    h2 { font-size: 1.2em; color: #ffd700;}
    .club-grid {
      display: grid;
      grid-template-columns: repeat(4, 70px);
      gap: 18px;
      justify-content: center;
      margin: 30px 0 16px 0;
    }
    .club-item {
      background: #232323;
      border: 2px solid #222;
      border-radius: 13px;
      padding: 7px;
      transition: border 0.2s;
      cursor: pointer;
      height: 80px;
      width: 70px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    .club-item.selected {
      border: 2px solid #ffd700;
      box-shadow: 0 0 10px #ffd70077;
    }
    .club-img {
      width: 42px;
      height: 42px;
      border-radius: 9px;
      background: #fff;
      margin-bottom: 6px;
      object-fit: contain;
    }
    .club-name {
      font-size: 0.92em;
      color: #fffa;
      margin-top: -3px;
      font-weight: 500;
    }
    .bar {
      margin: 13px 0 6px 0;
      font-size: 1.15em;
    }
    .warning {
      color: #ffa726;
      margin-bottom: 6px;
      font-size: 1em;
    }
    .best-bar {
      margin: 12px 0 10px 0;
      font-size: 1.16em;
      background: #232323;
      border-radius: 7px;
      padding: 5px;
      color: #b9ffb9;
      display: inline-block;
    }
    .btn {
      font-size: 1.1em;
      background: #ffd700;
      color: #222;
      border: none;
      border-radius: 7px;
      padding: 10px 25px;
      margin: 6px;
      cursor: pointer;
      font-weight: 700;
      transition: background 0.2s, color 0.2s;
      box-shadow: 0 2px 10px #ffd70025;
    }
    .btn:hover { background: #ffe95c; }
    .btn-clear {
      background: #232323;
      color: #ffd700;
      border: 1px solid #ffd700;
    }
    @media (max-width: 650px) {
      .club-grid { grid-template-columns: repeat(2, 95px);}
      .club-item { width: 88px; height: 92px; }
      .club-img { width: 50px; height: 50px;}
    }
  </style>
</head>
<body>
  <h1>🏆 Football Club Max<br>نسخة مصطفى الذكية</h1>
  <h2>اختر من الأندية… وحلل الترند!</h2>
  <div class="club-grid" id="clubGrid"></div>
  <div style="margin: 10px 0 2px 0; font-size:1em;">
    عدد الأندية في الشريط: <span id="count">0</span>/10
  </div>
  <div class="bar">
    <span>📋 شريطك الحالي: </span><span id="currentBar">(فارغ)</span>
  </div>
  <div id="warningMsg" class="warning"></div>
  <button class="btn" onclick="showBestBar()">✨ احسب 4 أفضل</button>
  <button class="btn btn-clear" onclick="clearSelection()">مسح</button>
  <div id="bestBar" class="best-bar"></div>
  <script>
    // روابط شعارات الأندية (imgur - كلها سريعة وآمنة)
    const clubs = [
      { name: "الهلال", img: "https://i.imgur.com/qJkVD0b.png" },
      { name: "الأهلي", img: "https://i.imgur.com/XRt5xUP.png" },
      { name: "الرجاء", img: "https://i.imgur.com/ygxIrT0.png" },
      { name: "النصر", img: "https://i.imgur.com/6FVIWZJ.png" },
      { name: "الترجي", img: "https://i.imgur.com/Yo5QQjN.png" },
      { name: "الاتحاد", img: "https://i.imgur.com/cNybCGx.png" },
      { name: "الوداد", img: "https://i.imgur.com/6T2b8Gf.png" },
      { name: "غلطة سراي", img: "https://i.imgur.com/6jGEyxU.png" }
    ];

    let selected = [];
    const grid = document.getElementById('clubGrid');
    const countSpan = document.getElementById('count');
    const currentBar = document.getElementById('currentBar');
    const warningMsg = document.getElementById('warningMsg');
    const bestBar = document.getElementById('bestBar');

    function updateGrid() {
      grid.innerHTML = '';
      clubs.forEach((club, idx) => {
        const div = document.createElement('div');
        div.className = 'club-item';
        if (selected.length < 10 || selected.includes(idx)) {
          div.onclick = () => selectClub(idx);
        } else {
          div.style.opacity = '0.6';
          div.style.cursor = 'not-allowed';
        }
        if (selected.includes(idx)) div.classList.add('selected');
        div.innerHTML = `<img src="${club.img}" class="club-img"><div class="club-name">${club.name}</div>`;
        grid.appendChild(div);
      });
    }

    function selectClub(idx) {
      if (selected.length >= 10 && !selected.includes(idx)) return;
      // السماح بالتكرار (كل ضغطة = إضافة)
      selected.push(idx);
      if (selected.length > 10) selected = selected.slice(-10);
      updateBar();
      updateGrid();
    }

    function updateBar() {
      countSpan.textContent = selected.length;
      if (selected.length === 0) {
        currentBar.innerHTML = "(فارغ)";
      } else {
        currentBar.innerHTML = selected.map(i => `<img src="${clubs[i].img}" class="club-img" style="width:24px;height:24px;margin:0 2px;vertical-align:middle;">`).join('');
      }
      warningMsg.textContent = "";
    }

    function clearSelection() {
      selected = [];
      updateBar();
      bestBar.innerHTML = "";
      updateGrid();
    }

    // تحليل الترند — جلب أكثر 4 أندية تكرارًا
    function showBestBar() {
      if (selected.length === 0) {
        bestBar.innerHTML = "";
        return;
      }
      // عد تكرار كل نادي
      let counts = {};
      selected.forEach(idx => {
        counts[idx] = (counts[idx] || 0) + 1;
      });
      // ترتيب الأعلى تكراراً
      const top = Object.entries(counts)
        .sort((a, b) => b[1] - a[1])
        .slice(0, 4)
        .map(([idx, count]) =>
          `<img src="${clubs[idx].img}" class="club-img" style="width:24px;height:24px;vertical-align:middle;"> ×${count}`
        );
      bestBar.innerHTML = `⬆️ ترند أفضل 4 : ${top.join(' ')}`;
    }

    // أول تحميل
    updateBar();
    updateGrid();
  </script>
</body>
</html>
